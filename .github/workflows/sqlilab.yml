name: sqlilab-sqlmap

on:
    schedule:
      - cron: '0 0 * * *'
    # push:
    workflow_dispatch:
      # inputs:
      #     target:
      #       required: false
      #       default: 'testfire.net'


jobs:
  nuclei-scan:
    runs-on: ubuntu-latest
    continue-on-error: true
    env:
      TARGET: ${{ github.event.inputs.target }}
    steps:
      # - run: echo "::add-mask::$TARGET"
      - run: curl ifconfig.me
      
      - uses: actions/checkout@main
        with:
          repository: wtwver/atm     
          token: ${{ secrets.GITHUBTOKEN }}
      - run: ls -R

      - run : docker run -p 80:80 acgpiano/sqli-labs:latest
      - run: curl localhost:80
      - run: docker run wtwver/sqlmap http://localhost
      - name: nuclei
        run: docker run projectdiscovery/nuclei -u http://localhost

